image: anandbose16/android-sdk:34
definitions:
  caches:
    gradle-android-build:
      key:
        files:
          - cache-id
      path: |
        "$HOME/.gradle"
        "$HOME/.android"
        "./.gradle"
        "./build"
        "./app/build"
        "/var/gradle"
pipelines:
  default:
    - step:
        name: Assemble, lint and run unit tests
        caches:
          - "gradle-android-build"
        script:
          - GRADLE_USER_HOME="/var/gradle" gradle --build-cache --configuration-cache :app:assembleDebug :app:lintDebug :app:testDebugUnitTest
        artifacts:
          - "app/build/outputs/apk/debug/app-debug.apk"
          - "app/build/reports"